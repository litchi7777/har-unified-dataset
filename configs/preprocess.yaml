# データセット前処理設定

# グローバル設定
global:
  raw_data_path: data/raw
  processed_data_path: data/processed
  seed: 42

# データセット固有の設定
datasets:
  # DSADS (Daily and Sports Activities Dataset)
  dsads:
    # データパス
    raw_data_path: data/raw
    processed_data_path: data/processed

    # サンプリングレート
    target_sampling_rate: 30  # Hz (元は25Hzからリサンプリング)

    # ウィンドウパラメータ
    window_size: 150      # 5秒 @ 30Hz
    stride: 30            # 1秒 @ 30Hz (80%オーバーラップ)

    # 正規化方法: 'standardize', 'minmax', 'normalize'
    normalize_method: standardize

    # データ分割比率
    train_ratio: 0.7
    val_ratio: 0.15
    test_ratio: 0.15

    # データセット情報（参考用）
    num_activities: 19
    num_subjects: 8
    num_channels: 45
    original_sampling_rate: 25  # Hz (元データ)
    # sampling_rateは30Hzにリサンプリングされる

  # MHEALTH (Mobile Health) Dataset
  mhealth:
    # データパス
    raw_data_path: data/raw
    processed_data_path: data/processed

    # サンプリングレート
    target_sampling_rate: 30  # Hz (元は50Hzからリサンプリング)

    # ウィンドウパラメータ
    window_size: 150      # 5秒 @ 30Hz
    stride: 30            # 1秒 @ 30Hz (80%オーバーラップ)

    # 正規化方法: 'standardize', 'minmax', 'normalize'
    normalize_method: standardize

    # データ分割比率
    train_ratio: 0.7
    val_ratio: 0.15
    test_ratio: 0.15

    # データセット情報（参考用）
    num_activities: 12
    num_subjects: 10
    num_channels: 23
    original_sampling_rate: 50  # Hz (元データ)
    # sampling_rateは30Hzにリサンプリングされる

  # OpenPack (Logistics Packaging Operations) Dataset
  openpack:
    # データパス
    raw_data_path: data/raw
    processed_data_path: data/processed

    # サンプリングレート
    target_sampling_rate: 30  # Hz (元から30Hz、リサンプリング不要)

    # ウィンドウパラメータ
    window_size: 150      # 5秒 @ 30Hz
    stride: 30            # 1秒 @ 30Hz (80%オーバーラップ)

    # データ分割比率
    train_ratio: 0.7
    val_ratio: 0.15
    test_ratio: 0.15

    # データセット情報（参考用）
    num_activities: 10
    num_subjects: 10
    num_channels: 40  # 4 IMU sensors × 10 channels (ACC:3 + GYRO:3 + QUAT:4)
    original_sampling_rate: 30  # Hz
    # リサンプリング不要

  # NHANES PAX-G/PAX-H Dataset
  nhanes:
    # データパス
    raw_data_path: data/raw
    processed_data_path: data/processed

    # 処理パラメータ
    window_size: 5        # ウィンドウサイズ（秒）
    sampling_rate: 80     # サンプリングレート（Hz）- 元のサンプリングレート
    target_sampling_rate: 30  # Hz (元は80Hzからリサンプリング)
    std_threshold: 0.02   # アクティビティ判定用標準偏差閾値

    # ユーザーID管理
    start_id: 62161       # 開始ユーザーID (PAX-G)
    end_id: 75557         # 終了ユーザーID (PAX-H含む全ユーザー: 約13000人)
    # PAX-G: 62161-73556 (2011年), PAX-H: 73557-75557 (2013年)
    discover_users: false  # ユーザーID自動発見モード（IDに抜けがあるため推奨）
    discovery_batch_size: 100  # 発見モード時のバッチサイズ
    batch_size: 100       # 処理バッチサイズ

    # 並列処理設定
    parallel: false       # 1ファイルずつ順次処理
    workers: 4            # 並列ワーカー数（parallelがtrueの場合のみ使用）

    # ダウンロード設定
    max_retries: 3        # 最大リトライ回数
    retry_delay: 5        # リトライ間隔（秒）

    # データセット情報（参考用）
    num_channels: 3       # X, Y, Z加速度
    original_sampling_rate: 80  # Hz

  # FORTHTRACE (FORTH-TRACE) Dataset
  forthtrace:
    # データパス
    raw_data_path: data/raw
    processed_data_path: data/processed

    # サンプリングレート
    target_sampling_rate: 30  # Hz (元は51.2Hzからリサンプリング)

    # ウィンドウパラメータ
    window_size: 150      # 5秒 @ 30Hz
    stride: 30            # 1秒 @ 30Hz (80%オーバーラップ)

    # データセット情報（参考用）
    num_activities: 16
    num_subjects: 15
    num_sensors: 5
    num_channels: 9       # 3軸 × 3モダリティ (ACC, GYRO, MAG)
    original_sampling_rate: 51.2  # Hz (元データ)
    # sampling_rateは30Hzにリサンプリングされる

  # HAR70+ (Human Activity Recognition for Older Adults) Dataset
  har70plus:
    # データパス
    raw_data_path: data/raw
    processed_data_path: data/processed

    # サンプリングレート
    target_sampling_rate: 30  # Hz (元は50Hzからリサンプリング)

    # ウィンドウパラメータ
    window_size: 150      # 5秒 @ 30Hz
    stride: 30            # 1秒 @ 30Hz (80%オーバーラップ)

    # データセット情報（参考用）
    num_activities: 7     # Walking, Shuffling, Stairs Up/Down, Standing, Sitting, Lying
    num_subjects: 18      # 70-95歳の高齢者
    num_sensors: 2        # LowerBack, RightThigh
    num_channels: 6       # 2センサー × 3軸加速度
    original_sampling_rate: 50  # Hz (元データ)
    # sampling_rateは30Hzにリサンプリングされる

  # HARTH (Human Activity Recognition Trondheim) Dataset
  harth:
    # データパス
    raw_data_path: data/raw
    processed_data_path: data/processed

    # サンプリングレート
    target_sampling_rate: 30  # Hz (元は50Hzからリサンプリング)

    # ウィンドウパラメータ
    window_size: 150      # 5秒 @ 30Hz
    stride: 30            # 1秒 @ 30Hz (80%オーバーラップ)

    # データセット情報（参考用）
    num_activities: 12    # Walking, Running, Shuffling, Stairs, Standing, Sitting, Lying, Cycling
    num_subjects: 22      # 自由生活環境での活動記録
    num_sensors: 2        # LowerBack, RightThigh
    num_channels: 6       # 2センサー × 3軸加速度
    original_sampling_rate: 50  # Hz (元データ)
    # sampling_rateは30Hzにリサンプリングされる

  # LARa (Logistic Activity Recognition) Dataset
  lara:
    # データパス
    raw_data_path: data/raw
    processed_data_path: data/processed

    # サンプリングレート
    target_sampling_rate: 30  # Hz (元は100Hzからリサンプリング)

    # ウィンドウパラメータ
    window_size: 150      # 5秒 @ 30Hz
    stride: 30            # 1秒 @ 30Hz (80%オーバーラップ)

    # データセット情報（参考用）
    num_activities: 8     # 物流倉庫作業活動
    num_subjects: 8       # S07-S14
    num_sensors: 5        # LeftArm, LeftLeg, Neck, RightArm, RightLeg
    num_channels: 30      # 5センサー × (3軸ACC + 3軸GYRO)
    original_sampling_rate: 100  # Hz (元データ)
    # sampling_rateは30Hzにリサンプリングされる

  # REALDISP (REAListic sensor DISPlacement) Activity Recognition Dataset
  realdisp:
    # データパス
    raw_data_path: data/raw
    processed_data_path: data/processed

    # サンプリングレート
    target_sampling_rate: 30  # Hz (推定50Hzからリサンプリング)

    # ウィンドウパラメータ
    window_size: 150      # 5秒 @ 30Hz
    stride: 30            # 1秒 @ 30Hz (80%オーバーラップ)

    # データセット情報（参考用）
    num_activities: 33    # 33種類のフィットネス・日常活動
    num_subjects: 17      # 17人の被験者
    num_sensors: 9        # 全身9箇所（両手足、背中）
    num_channels: 117     # 9センサー × 13チャンネル (ACC:3 + GYRO:3 + MAG:3 + QUAT:4)
    original_sampling_rate: 50  # Hz (データから推定)
    # sampling_rateは30Hzにリサンプリングされる

  # PAMAP2 (Physical Activity Monitoring) Dataset
  pamap2:
    # データパス
    raw_data_path: data/raw
    processed_data_path: data/processed

    # サンプリングレート
    target_sampling_rate: 30  # Hz (元は100Hzからリサンプリング)

    # ウィンドウパラメータ
    window_size: 150      # 5秒 @ 30Hz
    stride: 30            # 1秒 @ 30Hz (80%オーバーラップ)

    # データセット情報（参考用）
    num_activities: 12    # lying, sitting, standing, walking, running, cycling, Nordic walking, stairs, vacuum cleaning, ironing, rope jumping
    num_subjects: 9       # 被験者ID: 101-109
    num_sensors: 3        # hand, chest, ankle (IMU sensors)
    num_channels: 27      # 3センサー × 9チャンネル (ACC:3 + GYRO:3 + MAG:3 per sensor)
    original_sampling_rate: 100  # Hz (元データ)
    # sampling_rateは30Hzにリサンプリングされる

  # MEx (Multi-modal Exercise) Dataset
  mex:
    # データパス
    raw_data_path: data/raw
    processed_data_path: data/processed

    # サンプリングレート
    target_sampling_rate: 30  # Hz (元は100Hzからリサンプリング)

    # ウィンドウパラメータ
    window_size: 150      # 5秒 @ 30Hz
    stride: 30            # 1秒 @ 30Hz (80%オーバーラップ)

    # データセット情報（参考用）
    num_activities: 7     # 7種類の理学療法エクササイズ (Knee-rolling, Bridging, Pelvic tilt, The Clam, Repeated Extension in Lying, Prone punches, Superman)
    num_subjects: 30      # 30人の被験者
    num_sensors: 2        # Wrist, Thigh
    num_channels: 6       # 2センサー × 3軸加速度
    original_sampling_rate: 100  # Hz (元データ)
    # sampling_rateは30Hzにリサンプリングされる

  # OPPORTUNITY (OPPORTUNITY Activity Recognition) Dataset
  opportunity:
    # データパス
    raw_data_path: data/raw
    processed_data_path: data/processed

    # サンプリングレート
    target_sampling_rate: 30  # Hz (元データも30Hz、リサンプリング不要)

    # ウィンドウパラメータ
    window_size: 150      # 5秒 @ 30Hz
    stride: 30            # 1秒 @ 30Hz (80%オーバーラップ)

    # 処理するシナリオ（複数指定可能）
    scenarios: ['ideal']  # ideal, self, mutual から選択

    # データセット情報（参考用）
    num_activities: 17    # Mid-level gestures (Open/Close doors, drawers, etc.)
    num_subjects: 4       # S1-S4
    num_sensors: 8        # 7 IMUs (BACK, RUA, RLA, LUA, LLA, L_SHOE, R_SHOE) + ACC_SENSORS group
    num_channels: 113     # 全body-wornセンサー（IMU 7×13ch + 加速度センサー 22ch）
    original_sampling_rate: 30  # Hz (元データ)
    # リサンプリング不要

  # Ego4D Dataset
  ego4d:
    raw_data_path: data/raw
    processed_data_path: data/processed
    ego4d_src_root: /mnt/cafe/tadatsu/dataStoreRoot/Ego4D/original/v2/imu # すでにダウンロードしているデータセットを使う用の強制データパス
    target_sampling_rate: 30
    window_size: 150
    stride: 30  
    max_gap_sec: 1.0 # 1.0秒を超えるギャップ、または逆行で分割
    min_dataset_span_sec: 0.9933333333333333 # =149/150 # 少なくともこの時間以上の連続区間が必要

# ロギング設定
logging:
  level: INFO           # DEBUG, INFO, WARNING, ERROR
  format: '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
  save_to_file: true
  log_dir: logs/preprocessing
